<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>根据json结构创建table</title><link rel="stylesheet" type="text/css" href="/gulpdemo/plugin/bootstrap-3.3.5/css/bootstrap.css?v=bba40d0d97"><link rel="stylesheet" type="text/css" href="/gulpdemo/plugin/jquery-jbox/2.3/Skins/Blue/jbox.css"><link rel="stylesheet" type="text/css" href="/gulpdemo/css/common.css?v=c828de3005"><style type="text/css">*{padding:0;margin:0}body{font-size:16px;font-family:'microsoft Yahei',"Helvetica Neue",Helvetica,Arial,sans-serif;line-height:1.2}::-webkit-input-placeholder{color:#777}:-moz-placeholder{color:#777}::-moz-placeholder{color:#777}:-ms-input-placeholder{color:#777}.showDiv{width:99%;margin:15px auto;overflow:hidden;overflow-x:auto}.showDiv h2{padding-bottom:20px;text-align:center}.search{padding:10px 0 10px 15px;background:#f2f2f2;border-radius:6px}input{line-height:1.2;font-family:'microsoft Yahei';font-size:16px}.ipt-text{width:300px;border:1px solid #ccc;border-radius:4px;padding:6px 12px;box-shadow:0 1px 1px rgba(0,0,0,.075) inset;transition:border-color .15s ease-in-out 0s,box-shadow .15s ease-in-out 0s;color:#555;vertical-align:middle}.ipt-text:focus{border-color:#66afe9;box-shadow:0 1px 1px rgba(0,0,0,.075) inset,0 0 8px rgba(102,175,233,.6);outline:0 none}.btn{background-color:#428bca;border:1px solid #357ebd;border-radius:4px;padding:6px 12px;color:#fff;cursor:pointer;vertical-align:middle}.btn:hover{background-color:#3071a9;border-color:#285e8e}.tips{padding-left:8px;color:red;font-size:14px}.myTable{width:100%;border-collapse:collapse;border:1px solid #e1e1e1;font-size:14px}.myTable td,.myTable th{border:1px solid #e1e1e1;padding:10px 5px;text-align:center}.myTable thead th{background:#f2f2f2;background-image:-webkit-gradient(linear,left 0,left 100%,from(#f8f8f8),to(#ececec));background-image:-webkit-linear-gradient(top,#f8f8f8,0,#ececec,100%);background-image:-moz-linear-gradient(top,#f8f8f8 0,#ececec 100%);background-image:linear-gradient(to bottom,#f8f8f8 0,#ececec 100%);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fff8f8f8', endColorstr='#ffececec', GradientType=0);padding:10px;color:#777}.myTable tbody th{background-color:#f6fcff;font-weight:400}.myTable td{text-align:left;transition:background-color .15s ease-in-out 0s,color .15s ease-in-out 0s}.myTable tr:hover td{background-color:#eff4f7}.myTable tr.active td{background-color:#ffab00;color:#fff}</style></head><body><header class="header"><nav><ul class="navigation"><li><a href="/gulpdemo/index.html" target="_self" title="返回首页" class="home"></a></li><li><a href="/gulpdemo/html/mobile/taobao_adapter.html">移动端</a></li><li><a href="/gulpdemo/html/webDesign/vertical_align.html" target="_self">网页布局</a></li><li><a href="/gulpdemo/html/javascript/chinamap.html" target="_self">javascript & JQuery</a></li><li><a href="/gulpdemo/html/css3/transform.html" target="_self">CSS3</a></li><li><a href="/gulpdemo/html/h5/img2base64.html" target="_self">H5</a></li><li><a href="/gulpdemo/html/plugin/plugin_instruction.html" target="_self">插件说明</a></li><li><a href="/gulpdemo/html/echarts/freshness.html" target="_self">echarts</a></li></ul></nav></header><div class="container01"><div class="c-left"><input type="hidden" value="3" id="menuId"><div class="side-menu"><ul class="side-menu-list"><li><a href="#"><i class="glyphicon glyphicon-menu-right"></i>基础知识</a><ul class="side-menu-child hide"><li><a href="/gulpdemo/html/javascript/base/array.html">Array</a></li></ul></li><li><a href="#"><i class="glyphicon glyphicon-menu-right"></i>地图</a><ul class="side-menu-child hide"><li><a href="/gulpdemo/html/javascript/chinamap.html">中国地图</a></li></ul></li><li><a href="#"><i class="glyphicon glyphicon-menu-right"></i>高德地图</a><ul class="side-menu-child hide"><li><a href="/gulpdemo/html/javascript/gaode/gdMap.html">示例</a></li><li><a href="/gulpdemo/html/javascript/gaode/map.html">搜索结果列表</a></li><li><a href="/gulpdemo/html/javascript/gaode/poi.html">iframe传参</a></li><li><a href="/gulpdemo/html/javascript/gaode/adjustPosition.html">调整坐标</a></li></ul></li><li><a href="#"><i class="glyphicon glyphicon-menu-right"></i>百度地图</a><ul class="side-menu-child hide"><li><a href="/gulpdemo/html/javascript/baidu/baidu-map.html">百度地图</a></li></ul></li><li><a href="#"><i class="glyphicon glyphicon-menu-right"></i>form元素</a><ul class="side-menu-child hide"><li><a href="/gulpdemo/html/javascript/formBeauty/select.html">select美化</a></li><li><a href="/gulpdemo/html/javascript/formBeauty/radio.html">radio & checkbox美化</a></li><li><a href="/gulpdemo/html/javascript/formBeauty/ajax_upload.html">ajax上传文件</a></li></ul></li><li><a href="#"><i class="glyphicon glyphicon-menu-right"></i>JOSN结构转Table</a><ul class="side-menu-child hide"><li><a href="/gulpdemo/html/javascript/jsonToTable.html">示例1</a></li><li><a href="/gulpdemo/html/javascript/jsonToTable1.html">示例2</a></li></ul></li><li><a href="/gulpdemo/html/javascript/date_compare.html"><i class="icon-blank"></i>时间跨时区比较</a></li><li><a href="/gulpdemo/html/javascript/heavenly.html"><i class="icon-blank"></i>天干地支纪年</a></li><li><a href="/gulpdemo/html/javascript/table_sort.html"><i class="icon-blank"></i>table sort</a></li></ul></div></div><div class="c-right"><div class="showDiv"><h2>埋点实时展示</h2><div class="search"><label for="msg">查询条件：</label><input class="ipt-text" type="text" id="msg" placeholder="可以是设备号也可以是用户ID"> <input class="btn" type="button" onclick="settingDN()" value="设置查询条件"> <span class="tips" id="tips"></span></div><div style="margin-top:20px"></div><table class="myTable"><thead><tr><th>key</th><th>value</th></tr></thead><tbody><tr><th>_id</th><td>58c9e56ebfa92b970901ec24</td></tr><tr><th>path</th><td>/user/obtainFeed</td></tr><tr><th>info</th><td><p style="padding-bottom:10px">get</p><table class="table"><thead><tr><th>get.key</th><th>get.value</th></tr></thead><tbody><tr><th>tags</th><td>["User Category"]</td></tr><tr><th>summary</th><td>获取名片feed数据接口</td></tr><tr><th>description</th><td>返回名片的feed数据.<br>Method: GET<br>Error Code:<br><font color="red">106016</font>: 操作失败<br><font color="red">106017</font>: 参数错误<br><font color="red">106018</font>: 服务异常<br><font color="red">106019</font>: Feed数据为空<br></td></tr><tr><th>operationId</th><td>obtainFeedUsingGET</td></tr><tr><th>consumes</th><td>["application/json"]</td></tr><tr><th>parameters</th><td><table class="table"><thead><tr><th>parameters.name</th><th>parameters.in</th><th>parameters.description</th><th>parameters.required</th><th>parameters.type</th></tr></thead><tbody><tr><td>X-Toon-User-ID"</td><td>header</td><td>User ID</td><td>true</td><td>string</td></tr><tr><td>X-Toon-User-ID"</td><td>header</td><td>User ID</td><td>true</td><td>string</td></tr><tr><td>X-Toon-User-ID"</td><td>header</td><td>User ID</td><td>true</td><td>string</td></tr></tbody></table></td></tr><tr><th>responses</th><td>获取名片feed数据接口</td></tr></tbody></table></td></tr></tbody></table><div style="overflow:auto;margin-top:15px"><table id="table" class="myTable"><thead></thead><tbody></tbody></table></div></div></div></div><footer class="footer"><p>Author: wangyaru</p><p>Created time: 2016/02/15</p><p>&copy;forever</p></footer><script type="text/javascript" src="/gulpdemo/js/jquery-1.12.1.js?v=da6deec5d1"></script><script type="text/javascript" src="/gulpdemo/js/jquery-migrate-1.1.1.js?v=d62a5c2a27"></script><script type="text/javascript" src="/gulpdemo/plugin/bootstrap-3.3.5/js/bootstrap.js?v=5a9f44d675"></script><script type="text/javascript" src="/gulpdemo/plugin/jquery-jbox/2.3/jquery.jBox-2.3.src.js?v=568416d5b1"></script><script type="text/javascript" src="/gulpdemo/js/main.js?v=6f399efa9e"></script><script type="text/javascript">function connection(){ws=new WebSocket("ws://localhost:8080/dataInterOper/buriedPoint"),ws.onopen=function(e){console.log(e)},ws.onmessage=function(evn){console.log(evn.data);var table=document.getElementById("table"),tips=document.getElementById("tips"),thisData=evn.data,table_rows=1,timmer=setInterval(function(){if(thisData='{"ui":"335795","dv":"'+Math.ceil(100*Math.random())+'","tt":"100","fi":"","receiveTime":"2016-12-14 11:42:16.0703","ci":"","sf":"6382C3D3-DCBA-44F6-BF92-AA47513034D3","ft":"4","dn":"DBCF66C3-5EAF-43AE-9007-29BFEB1128D9","oi":"2c9c9c6f58fb51980158fb6c6c7f04aa","bc":"19","bd":""{"details":"自动登陆拉取feed完成","startStatus":"1","startId":"2016\\/12\\/14 11:42:15 03","moduleId":"19","type":"0","telephone":"","conTime":"2016\\/12\\/14 11:42:16 715"}"","ip":"106.39.33.246"}',table_rows<6)try{var obj={_id:"58c9e56ebfa92b970901ec24",path:"/user/obtainFeed",info:{get:{tags:["User Category"],summary:"获取名片feed数据接口",description:'返回名片的feed数据.</br>Method: GET</br>Error Code: </br><font color="red">106016</font>: 操作失败</br><font color="red">106017</font>: 参数错误</br><font color="red">106018</font>: 服务异常</br><font color="red">106019</font>: Feed数据为空</br>',operationId:"obtainFeedUsingGET",consumes:["application/json"],parameters:[{name:"X-Toon-User-ID","in":"header",description:"User ID",required:!0,type:"string"},{name:"X-Toon-User-Token","in":"header",description:"User Token",required:!0,type:"string"},{name:"X-Toon-User-Agent","in":"header",description:"User Agent",required:!0,type:"string"},{name:"feedId","in":"query",required:!1,type:"string"},{name:"feedIds","in":"query",required:!1,type:"array",items:{type:"string"},collectionFormat:"multi"}],responses:{200:{description:"OK"},1001:{description:"User error 1001"},2001:{description:"User error 2001"}}}}},keys=getKeys(obj);console.log(keys);var thead=table.getElementsByTagName("thead")[0],tbody=table.getElementsByTagName("tbody")[0];if(!thead.hasChildNodes()){for(var theadRowNum=0,reg=/\[[^\[\]]*\]/g,i=0,len=keys.length;i<len;i++)theadRowNum=Math.max(theadRowNum,keys[i].match(reg).length);for(var fragmentTrs=document.createDocumentFragment(""),j=1;j<=theadRowNum;j++){for(var colspanTxt=[],fragment=document.createDocumentFragment(""),i=0,len=keys.length;i<len;i++){var texts=keys[i].match(reg);if(j<=texts.length){var th=document.createElement("th");if(th.innerHTML=texts[j-1].replace('["',"").replace('"]',""),j==texts.length)th.rowSpan=theadRowNum-j+1,fragment.appendChild(th);else{var thisTxt=texts[j-1];if(console.log(colspanTxt.indexOf(thisTxt)),-1==colspanTxt.indexOf(thisTxt)){colspanTxt.push(thisTxt);for(var thisColspanNum=0,reg01=new RegExp(thisTxt.replace("[","\\[").replace("]","\\]"),"g"),k=i;k<len;k++)keys[k].match(reg01)&&thisColspanNum++;th.colSpan=thisColspanNum,fragment.appendChild(th)}}}}var tr=document.createElement("tr");tr.appendChild(fragment),fragmentTrs.appendChild(tr)}thead.appendChild(fragmentTrs)}for(var fragmentBody=document.createDocumentFragment(""),i=0,len=keys.length;i<len;i++){var td=document.createElement("td");td.innerHTML=eval("obj"+keys[i]),fragmentBody.appendChild(td)}var tr=document.createElement("tr");tr.className="active",tr.appendChild(fragmentBody),tbody.insertBefore(tr,tbody.firstChild),setTimeout(function(){tr.className=tr.className.replace("active")},1e3)}catch(e){console.log(e),tips.innerHTML=thisData}else clearInterval(timmer);table_rows++},1500)},ws.onclose=function(){console.log("关闭")}}function settingDN(){var e=document.getElementById("msg").value;ws.send(e),document.getElementById("msg").value=""}function getKeys(e,t){var n=arguments.callee,r=[];for(var a in e)if("object"==typeof e[a]){var o=t?t+'["'+a+'"]':'["'+a+'"]';r=r.concat(n(e[a],o))}else r.push(t?t+'["'+a+'"]':'["'+a+'"]');return r}document.getElementById("table").parentNode.style.maxHeight=window.innerHeight-150;var ws;Array.prototype.indexOf=function(e){for(var t=0,n=this.length;t<n;t++)if(e===this[t])return t;return-1},connection()</script></body></html>