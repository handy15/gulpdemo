<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>天干地支纪年</title><link rel="stylesheet" type="text/css" href="/gulpdemo/plugin/bootstrap-3.3.5/css/bootstrap.css?v=bba40d0d97"><link rel="stylesheet" type="text/css" href="/gulpdemo/plugin/jquery-jbox/2.3/Skins/Blue/jbox.css"><link rel="stylesheet" type="text/css" href="/gulpdemo/css/common.css?v=834de0cd75"></head><body><header class="header"><nav><ul class="navigation"><li><a href="/gulpdemo/index.html" target="_self" title="返回首页" class="home"></a></li><li><a href="/gulpdemo/html/mobile/taobao_adapter.html">移动端</a></li><li><a href="/gulpdemo/html/webDesign/vertical_align.html" target="_self">网页布局</a></li><li><a href="/gulpdemo/html/javascript/chinamap.html" target="_self">javascript & JQuery</a></li><li><a href="/gulpdemo/html/css3/transform.html" target="_self">CSS3</a></li><li><a href="/gulpdemo/html/h5/img2base64.html" target="_self">H5</a></li><li><a href="/gulpdemo/html/plugin/plugin_instruction.html" target="_self">插件说明</a></li><li><a href="/gulpdemo/html/echarts/freshness.html" target="_self">echarts</a></li></ul></nav></header><div class="container01"><div class="c-left"><input type="hidden" value="3" id="menuId"><div class="side-menu"><ul class="side-menu-list"><li><a href="#"><i class="glyphicon glyphicon-menu-right"></i>基础知识</a><ul class="side-menu-child hide"><li><a href="/gulpdemo/html/javascript/base/array.html">Array</a></li></ul></li><li><a href="#"><i class="glyphicon glyphicon-menu-right"></i>地图</a><ul class="side-menu-child hide"><li><a href="/gulpdemo/html/javascript/chinamap.html">中国地图</a></li></ul></li><li><a href="#"><i class="glyphicon glyphicon-menu-right"></i>高德地图</a><ul class="side-menu-child hide"><li><a href="/gulpdemo/html/javascript/gaode/gdMap.html">示例</a></li><li><a href="/gulpdemo/html/javascript/gaode/map.html">搜索结果列表</a></li><li><a href="/gulpdemo/html/javascript/gaode/poi.html">iframe传参</a></li><li><a href="/gulpdemo/html/javascript/gaode/adjustPosition.html">调整坐标</a></li></ul></li><li><a href="#"><i class="glyphicon glyphicon-menu-right"></i>百度地图</a><ul class="side-menu-child hide"><li><a href="/gulpdemo/html/javascript/baidu/baidu-map.html">百度地图</a></li></ul></li><li><a href="#"><i class="glyphicon glyphicon-menu-right"></i>form元素</a><ul class="side-menu-child hide"><li><a href="/gulpdemo/html/javascript/formBeauty/select.html">select美化</a></li><li><a href="/gulpdemo/html/javascript/formBeauty/radio.html">radio & checkbox美化</a></li><li><a href="/gulpdemo/html/javascript/formBeauty/ajax_upload.html">ajax上传文件</a></li></ul></li><li><a href="#"><i class="glyphicon glyphicon-menu-right"></i>JOSN结构转Table</a><ul class="side-menu-child hide"><li><a href="/gulpdemo/html/javascript/jsonToTable.html">示例1</a></li><li><a href="/gulpdemo/html/javascript/jsonToTable1.html">示例2</a></li></ul></li><li><a href="/gulpdemo/html/javascript/date_compare.html"><i class="icon-blank"></i>时间跨时区比较</a></li><li><a href="/gulpdemo/html/javascript/heavenly.html"><i class="icon-blank"></i>天干地支纪年</a></li><li><a href="/gulpdemo/html/javascript/table_sort.html"><i class="icon-blank"></i>table sort</a></li></ul></div></div><div class="c-right"><h1>概念</h1><p><strong>天干：</strong>"甲","乙","丙","丁","戊","己","庚","辛","壬","癸"，共10个。</p><p><strong>地支：</strong>"子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"，共12个。</p><div class="alert alert-danger" id="str"></div><h1>JS代码</h1><pre class="brush:js">
            //天干
            var heavenly = ["庚","辛","壬","癸","甲","乙","丙","丁","戊","己"];
            //地支
            var terrestial = ["申","酉","戌","亥","子","丑","寅","卯","辰","巳","午","未"];
            var curTime = new Date();
            var year = curTime.getFullYear();
            var strDate = "今日是：" + year + "年"
                    + (curTime.getMonth() + 1) + "月"
                    + curTime.getDate() + "日&nbsp;&nbsp;星期"
                    + '日一二三四五六'.charAt(curTime.getDay());

            //农历日期
            var lunarInfo = new Array(0x04bd8,0x04ae0,0x0a570,0x054d5,0x0d260,0x0d950,0x16554,0x056a0,0x09ad0,0x055d2,
                    0x04ae0,0x0a5b6,0x0a4d0,0x0d250,0x1d255,0x0b540,0x0d6a0,0x0ada2,0x095b0,0x14977,
                    0x04970,0x0a4b0,0x0b4b5,0x06a50,0x06d40,0x1ab54,0x02b60,0x09570,0x052f2,0x04970,
                    0x06566,0x0d4a0,0x0ea50,0x06e95,0x05ad0,0x02b60,0x186e3,0x092e0,0x1c8d7,0x0c950,
                    0x0d4a0,0x1d8a6,0x0b550,0x056a0,0x1a5b4,0x025d0,0x092d0,0x0d2b2,0x0a950,0x0b557,
                    0x06ca0,0x0b550,0x15355,0x04da0,0x0a5d0,0x14573,0x052d0,0x0a9a8,0x0e950,0x06aa0,
                    0x0aea6,0x0ab50,0x04b60,0x0aae4,0x0a570,0x05260,0x0f263,0x0d950,0x05b57,0x056a0,
                    0x096d0,0x04dd5,0x04ad0,0x0a4d0,0x0d4d4,0x0d250,0x0d558,0x0b540,0x0b5a0,0x195a6,
                    0x095b0,0x049b0,0x0a974,0x0a4b0,0x0b27a,0x06a50,0x06d40,0x0af46,0x0ab60,0x09570,
                    0x04af5,0x04970,0x064b0,0x074a3,0x0ea50,0x06b58,0x055c0,0x0ab60,0x096d5,0x092e0,
                    0x0c960,0x0d954,0x0d4a0,0x0da50,0x07552,0x056a0,0x0abb7,0x025d0,0x092d0,0x0cab5,
                    0x0a950,0x0b4a0,0x0baa4,0x0ad50,0x055d9,0x04ba0,0x0a5b0,0x15176,0x052b0,0x0a930,
                    0x07954,0x06aa0,0x0ad50,0x05b52,0x04b60,0x0a6e6,0x0a4e0,0x0d260,0x0ea65,0x0d530,
                    0x05aa0,0x076a3,0x096d0,0x04bd7,0x04ad0,0x0a4d0,0x1d0b6,0x0d250,0x0d520,0x0dd45,
                    0x0b5a0,0x056d0,0x055b2,0x049b0,0x0a577,0x0a4b0,0x0aa50,0x1b255,0x06d20,0x0ada0,0x14b63);
            var solarMonth = new Array(31,28,31,30,31,30,31,31,30,31,30,31);
            var Gan = new Array("甲","乙","丙","丁","戊","己","庚","辛","壬","癸");
            var Zhi = new Array("子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥");
            var Animals = new Array("鼠","牛","虎","兔","龙","蛇","马","羊","猴","鸡","狗","猪");
            var solarTerm = new Array("小寒","大寒","立春","雨水","惊蛰","春分","清明","谷雨","立夏","小满","芒种","夏至","小暑","大暑","立秋","处暑","白露","秋分","寒露","霜降","立冬","小雪","大雪","冬至")
            var sTermInfo = new Array(0,21208,42467,63836,85337,107014,128867,150921,173149,195551,218072,240693,263343,285989,308563,331033,353350,375494,397447,419210,440795,462224,483532,504758)
            var nStr1 = new Array('日','一','二','三','四','五','六','七','八','九','十')
            var nStr2 = new Array('初','十','廿','卅','　')
            var monthName = new Array("JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC");

            /*****************************************************************************
             *日期计算
             *****************************************************************************/

        //======================================   传回农历   y年的总天数
            function lYearDays(y){
                var i,sum = 348
                for(i=0x8000; i>0x8; i>>=1) sum += (lunarInfo[y-1900] & i) ? 1: 0;
                return(sum+leapDays(y))
            }

            //======================================   传回农历   y年闰月的天数
            function leapDays(y){
                if(leapMonth(y)) return((lunarInfo[y-1900] & 0x10000) ? 30: 29)
                else return(0)
            }

            //======================================   传回农历   y年闰哪个月   1-12   ,   没闰传回   0
            function leapMonth(y){
                return(lunarInfo[y-1900] & 0xf)
            }

            //======================================   传回农历   y年m月的总天数
            function   monthDays(y,m)   {
                return(   (lunarInfo[y-1900]   &   (0x10000>>m))?   30:   29   )
            }

            //======================================   算出农历,   传入日期物件,   传回农历日期物件
            //该物件属性有   .year   .month   .day   .isLeap   .yearCyl   .dayCyl   .monCyl
            function   Lunar(objDate)   {
                var   i,   leap=0,   temp=0
                var   baseDate   =   new   Date(1900,0,31)
                var   offset       =   (objDate   -   baseDate)/86400000

                this.dayCyl   =   offset   +   40
                this.monCyl   =   14

                for(i=1900;   i&lt;2050   &&   offset>0;   i++)   {
                    temp   =   lYearDays(i)
                    offset   -=   temp
                    this.monCyl   +=   12
                }

                if(offset&lt;0)   {
                    offset   +=   temp;
                    i--;
                    this.monCyl   -=   12
                }

                this.year   =   i
                this.yearCyl   =   i-1864

                leap   =   leapMonth(i)   //闰哪个月
                this.isLeap   =   false

                for(i=1;   i&lt;13   &&   offset>0;   i++)   {
                    //闰月
                    if(leap>0   &&   i==(leap+1)   &&   this.isLeap==false){
                        --i;
                        this.isLeap   =   true;
                        temp   =   leapDays(this.year);
                    }else{
                        temp   =   monthDays(this.year,   i);
                    }
                    //解除闰月
                    if(this.isLeap==true   &&   i==(leap+1))   this.isLeap   =   false

                    offset   -=   temp
                    if(this.isLeap   ==   false)   this.monCyl   ++
                }
                if(offset==0   &&   leap>0   &&   i==leap+1)
                    if(this.isLeap){
                        this.isLeap   =   false;
                    }else{
                        this.isLeap   =   true;   --i;   --this.monCyl;
                    }

                if(offset&lt;0){
                    offset   +=   temp;
                    --i;
                    --this.monCyl;
                }

                this.month   =   i
                this.day   =   offset   +   1
            }

            //==============================传回国历   y年某m+1月的天数
            function   solarDays(y,m)   {
                if(m==1)
                    return(((y%4   ==   0)   &&   (y%100   !=   0)   ||   (y%400   ==   0))?   29:   28)
                else
                    return(solarMonth[m])
            }
            //==============================   传入   offset   传回干支,   0=甲子
            function   cyclical(num)   {
                return(Gan[num%10]+Zhi[num%12])
            }

            //======================   中文日期
            function   cDay(d){
                var   s;

                switch   (d)   {
                    case   10:
                        s   =   '初十';   break;
                    case   20:
                        s   =   '二十';   break;
                        break;
                    case   30:
                        s   =   '三十';   break;
                        break;
                    default   :
                        s   =   nStr2[Math.floor(d/10)];
                        s   +=   nStr1[d%10];
                }
                return(s);
            }
            //======================   中文月份
            function   cMonth(m){
                var   s;

                switch   (m)   {
                    case   1:
                        s   =   '正月';   break;
                    case   2:
                        s   =   '二月';   break;
                    case   3:
                        s   =   '三月';   break;
                    case   4:
                        s   =   '四月';   break;
                    case   5:
                        s   =   '五月';   break;
                    case   6:
                        s   =   '六月';   break;
                    case   7:
                        s   =   '七月';   break;
                    case   8:
                        s   =   '八月';   break;
                    case   9:
                        s   =   '九月';   break;
                    case   10:
                        s   =   '十月';   break;
                    case   11:
                        s   =   '十一月';   break;
                    case   12:
                        s   =   '十二月';   break;
                    default   :
                        break;
                }
                return(s);
            }

            function   GetLunarDay(YearStr,MonthStr,DayStr){
                var   sDObj=new   Date(parseInt(YearStr),parseInt(MonthStr)-1,parseInt(DayStr))
                var   lDObj=new   Lunar(sDObj)           //农历
                return   cMonth(lDObj.month)+cDay(lDObj.day);
            }
            //农历纪年
            strDate += "&nbsp;&nbsp;农历" + heavenly[year.toString().match(/\d$/)] + terrestial[year%12] + "年 " + GetLunarDay(2016,curTime.getMonth() + 1,curTime.getDate());
            $('#str').html(strDate);
        </pre></div></div><footer class="footer"><p>Author: wangyaru</p><p>Created time: 2016/02/15</p><p>&copy;forever</p></footer><script type="text/javascript" src="/gulpdemo/js/jquery-1.12.1.js?v=da6deec5d1"></script><script type="text/javascript" src="/gulpdemo/js/jquery-migrate-1.1.1.js?v=d62a5c2a27"></script><script type="text/javascript" src="/gulpdemo/plugin/bootstrap-3.3.5/js/bootstrap.js?v=5a9f44d675"></script><script type="text/javascript" src="/gulpdemo/plugin/jquery-jbox/2.3/jquery.jBox-2.3.src.js?v=568416d5b1"></script><script type="text/javascript" src="/gulpdemo/js/main.js?v=6f399efa9e"></script><script type="text/javascript">function lYearDays(a){var e,r=348;for(e=32768;e>8;e>>=1)r+=lunarInfo[a-1900]&e?1:0;return r+leapDays(a)}function leapDays(a){return leapMonth(a)?65536&lunarInfo[a-1900]?30:29:0}function leapMonth(a){return 15&lunarInfo[a-1900]}function monthDays(a,e){return lunarInfo[a-1900]&65536>>e?30:29}function Lunar(a){var e,r=0,n=0,t=new Date(1900,0,31),s=(a-t)/864e5;for(this.dayCyl=s+40,this.monCyl=14,e=1900;e<2050&&s>0;e++)n=lYearDays(e),s-=n,this.monCyl+=12;for(s<0&&(s+=n,e--,this.monCyl-=12),this.year=e,this.yearCyl=e-1864,r=leapMonth(e),this.isLeap=!1,e=1;e<13&&s>0;e++)r>0&&e==r+1&&0==this.isLeap?(--e,this.isLeap=!0,n=leapDays(this.year)):n=monthDays(this.year,e),1==this.isLeap&&e==r+1&&(this.isLeap=!1),s-=n,0==this.isLeap&&this.monCyl++;0==s&&r>0&&e==r+1&&(this.isLeap?this.isLeap=!1:(this.isLeap=!0,--e,--this.monCyl)),s<0&&(s+=n,--e,--this.monCyl),this.month=e,this.day=s+1}function solarDays(a,e){return 1==e?a%4==0&&a%100!=0||a%400==0?29:28:solarMonth[e]}function cyclical(a){return Gan[a%10]+Zhi[a%12]}function cDay(a){var e;switch(a){case 10:e="初十";break;case 20:e="二十";break;case 30:e="三十";break;default:e=nStr2[Math.floor(a/10)],e+=nStr1[a%10]}return e}function cMonth(a){var e;switch(a){case 1:e="正月";break;case 2:e="二月";break;case 3:e="三月";break;case 4:e="四月";break;case 5:e="五月";break;case 6:e="六月";break;case 7:e="七月";break;case 8:e="八月";break;case 9:e="九月";break;case 10:e="十月";break;case 11:e="十一月";break;case 12:e="十二月"}return e}function GetLunarDay(a,e,r){var n=new Date(parseInt(a),parseInt(e)-1,parseInt(r)),t=new Lunar(n);return cMonth(t.month)+cDay(t.day)}var heavenly=["庚","辛","壬","癸","甲","乙","丙","丁","戊","己"],terrestial=["申","酉","戌","亥","子","丑","寅","卯","辰","巳","午","未"],curTime=new Date,year=curTime.getFullYear(),strDate="今日是："+year+"年"+(curTime.getMonth()+1)+"月"+curTime.getDate()+"日&nbsp;&nbsp;星期"+"日一二三四五六".charAt(curTime.getDay()),lunarInfo=new Array(19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42448,83315,21200,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46496,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,21952,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19415,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835),solarMonth=new Array(31,28,31,30,31,30,31,31,30,31,30,31),Gan=new Array("甲","乙","丙","丁","戊","己","庚","辛","壬","癸"),Zhi=new Array("子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"),Animals=new Array("鼠","牛","虎","兔","龙","蛇","马","羊","猴","鸡","狗","猪"),solarTerm=new Array("小寒","大寒","立春","雨水","惊蛰","春分","清明","谷雨","立夏","小满","芒种","夏至","小暑","大暑","立秋","处暑","白露","秋分","寒露","霜降","立冬","小雪","大雪","冬至"),sTermInfo=new Array(0,21208,42467,63836,85337,107014,128867,150921,173149,195551,218072,240693,263343,285989,308563,331033,353350,375494,397447,419210,440795,462224,483532,504758),nStr1=new Array("日","一","二","三","四","五","六","七","八","九","十"),nStr2=new Array("初","十","廿","卅","　"),monthName=new Array("JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC");strDate+="&nbsp;&nbsp;农历"+heavenly[year.toString().match(/\d$/)]+terrestial[year%12]+"年 "+GetLunarDay(2016,curTime.getMonth()+1,curTime.getDate()),$("#str").html(strDate)</script><link rel="stylesheet" type="text/css" href="/gulpdemo/plugin/syntaxhighlighter_3.0.83/shCoreDefault.css?v=b1f1863310"><script type="text/javascript" src="/gulpdemo/plugin/syntaxhighlighter_3.0.83/shCore.js?v=990e7f9af1"></script><script type="text/javascript" src="/gulpdemo/plugin/syntaxhighlighter_3.0.83/shAutoloader.js?v=7b30a548e7"></script><script type="text/javascript">$(document).ready(function(){SyntaxHighlighter.autoloader(["js","jscript","javascript","/gulpdemo/plugin/syntaxhighlighter_3.0.83/shBrushJScript.js?v=614d07995f"],["css","/gulpdemo/plugin/syntaxhighlighter_3.0.83/shBrushCss.js?v=25fa849321"],["xml","html","/gulpdemo/plugin/syntaxhighlighter_3.0.83/shBrushXml.js?v=035d0131d7"]),SyntaxHighlighter.all()})</script></body></html>