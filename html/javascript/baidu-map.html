<!DOCTYPE HTML><html><head><meta charset="utf-8"><title>百度地图</title><link rel="stylesheet" type="text/css" href="/gulpdemo/plugin/bootstrap-3.3.5/gulpdemo/css/bootstrap.css?v=957474c344"><link rel="stylesheet" type="text/css" href="/gulpdemo/css/common.css?v=1d2e760412"><link rel="stylesheet" href="http://api.map.baidu.com/library/SearchInfoWindow/1.5/src/SearchInfoWindow_min.css"><style>#container{width:98%;height:550px}.btn-ok{display:inline-block;height:32px;width:80px;margin-bottom:10px;background-color:#0b97c4;border-radius:6px;color:#fff;text-align:center;line-height:32px;cursor:pointer}.uhide{display:none}</style></head><body><header class="header"><nav><ul class="navigation"><li><a href="/index.html" target="_self" title="返回首页" class="home"></a></li><li><a href="#">移动端</a></li><li><a href="/gulpdemo/html/webDesign/vertical_align.html" target="_self">网页布局</a></li><li><a href="/gulpdemo/html/javascript/chinamap.html" target="_self">javascript & JQuery</a></li></ul></nav></header><div class="container01"><div class="c-left"><input type="hidden" value="3" id="menuId"><div class="side-menu"><ul class="side-menu-list"><li><a href="#"><i class="glyphicon glyphicon-menu-right"></i>地图</a><ul class="side-menu-child hide"><li><a href="/gulpdemo/html/javascript/chinamap.html">中国地图</a></li><li><a href="/gulpdemo/html/javascript/gaode/gdMap.html">高德地图</a></li><li><a href="/gulpdemo/html/javascript/gaode/map.html">高德地图-搜索结果列表</a></li><li><a href="/gulpdemo/html/javascript/gaode/poi.html">高德地图-iframe传参</a></li><li><a href="/gulpdemo/html/javascript/baidu-map.html">百度地图</a></li></ul></li><li><a href="#"><i class="glyphicon glyphicon-menu-right"></i>电站工具</a><ul class="side-menu-child hide"><li><a href="/index.php/Home/Page/index?page_id=113">光照参数资源列表</a></li><li><a href="/index.php/Home/Page/index?page_id=112">光照资源参数详情</a></li><li><a href="/index.php/Home/Page/index?page_id=114">补贴政策详情</a></li><li><a href="/index.php/Home/Page/index?page_id=115">补贴政策库列表</a></li><li><a href="/index.php/Home/Page/index?page_id=167">踏勘报告首页</a></li></ul></li></ul></div></div><div class="c-right"><header class="uhide"><div class="search-input-wrapper"><input id="searchKeys" type="text" placeholder="请输入地址" readonly="readonly"></div></header><div><span class="btn-ok" onclick="selectThisPoi(event)">确定</span></div><div id="container"></div></div></div><footer class="footer"><p>Author: wangyaru</p><p>Created time: 2016/02/15</p><p>&copy;forever</p></footer><script type="text/javascript" src="/js/jquery-1.12.1.js?v=62f69d29b6"></script><script type="text/javascript" src="/gulpdemo/plugin/bootstrap-3.3.5/js/bootstrap.js"></script><script type="text/javascript" src="/js/main.js?v=04b692f78d"></script><script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&s=1&ak=9eQUU2A8MQQx4yF0y3pQVIBr"></script><script type="text/javascript" src="http://api.map.baidu.com/library/SearchInfoWindow/1.5/src/SearchInfoWindow_min.js"></script><script type="text/javascript">function regeocoder(e,a){a||(a=!1),geoc.getLocation(e,function(t){markerData=t,showPositionPoint(e,a)})}function setPlace(){function e(){a.getResults().getPoi(0).point}var a=new BMap.LocalSearch(map,{onSearchComplete:e});a.search(myValue)}function searchTextAddr(){var e=$("#searchKeys").val();e&&geoc.getPoint(e,function(e){},"北京市")}function translateCallback(e){if(0==e.status){var a=e.points[0];userBPosition.lng=a.lng,userBPosition.lat=a.lat;var t=userBPosition;1==posPoi&&(t={lng:lngParam,lat:latParam}),regeocoder(new BMap.Point(t.lng,t.lat),!0)}}function showPositionPoint(e,a){var t=new BMap.Point(e.lng,e.lat),o=new BMap.Marker(t),n={isCustom:!0,width:300,title:""},i="<div style='overflow: hidden;height: auto;line-height: 24px;width: auto;'>";i+="<span style='font-weight:900;'>地址</span> : "+markerData.address,i+="</div>";var r=new BMap.InfoWindow(i,n);o.addEventListener("click",function(){showMyInfoWin(this,r)}),map.addOverlay(o),showMyInfoWin(o,r),1==a&&map.centerAndZoom(t,initMapZoom),$("#loadingBox").removeClass("is-visible")}function showMyInfoWin(e,a){e.openInfoWindow(a)}function selectThisPoi(e){if(e.stopPropagation(),!markerData)return void alert("对不起，没有坐标点或坐标点数据加载异常，请重新尝试！");var a=markerData.addressComponents,t=a.province,o=a.city,n=a.district,i=a.street,r=a.streetNumber,s=markerData.address,l=markerData.point,c={};c.province=t,c.city=o,c.area=n,c.street=i,c.streetNumber=r,c.fulladdress=s,c.positionJson=l;var p=new RegExp("^"+t,"g");s=s.replace(p,""),p=new RegExp("^"+o,"g"),s=s.replace(p,""),p=new RegExp("^"+n,"g"),c.detail=s.replace(p,"");var u=JSON.stringify(c),g=window.parent;g&&g.returnMapVal?g.returnMapVal?g.returnMapVal(u):g.postMessage("returnMapVal",u):alert(u)}var lngParam=utilities.getQueryString("lng"),latParam=utilities.getQueryString("lat"),isPos=utilities.getQueryString("isPos"),posPoi;1==isPos&&lngParam&&latParam&&(posPoi=!0);var $searchInput,initMapZoom=13,userGPSPosition={lng:"",lat:""},userBPosition={lng:"",lat:""},bjPosition={lng:"116.404068",lat:"39.914832"},xianPosition={lng:"108.953492",lat:"34.276411"},markerData;$(function(){$searchInput=$("#pileSearchKeys")});var map=new BMap.Map("container",{enableMapClick:!1});map.centerAndZoom(new BMap.Point(bjPosition.lng,bjPosition.lat),initMapZoom),map.enableScrollWheelZoom(),map.addEventListener("click",function(e){e.overlay?console.log("overlay"):(map.clearOverlays(),markerData=null,console.log(e.point),regeocoder(e.point))});var geoc=new BMap.Geocoder,geolocationControl=new BMap.GeolocationControl;map.addControl(geolocationControl);var ac=new BMap.Autocomplete({input:"searchKeys",location:map}),myValue;ac.addEventListener("onconfirm",function(e){var a=e.item.value;myValue=a.province+a.city+a.district+a.street+a.business,setPlace()})</script></body></html>