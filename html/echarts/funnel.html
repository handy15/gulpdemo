<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>漏斗模型</title><link rel="stylesheet" type="text/css" href="/gulpdemo/plugin/bootstrap-3.3.5/css/bootstrap.css?v=bba40d0d97"><link rel="stylesheet" type="text/css" href="/gulpdemo/plugin/jquery-jbox/2.3/Skins/Blue/jbox.css"><link rel="stylesheet" type="text/css" href="/gulpdemo/css/common.css?v=c828de3005"><style type="text/css">*{box-sizing:border-box}hr{border:0;border-top:1px solid #eee;height:0;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box}.btn{height:40px;min-width:38px;display:inline-block;padding:6px 12px;margin-bottom:0;font-size:14px;font-weight:400;line-height:1.42857143;text-align:center;white-space:nowrap;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-image:none;border:1px solid transparent;border-radius:3px}.btn.active.focus,.btn.active:focus,.btn.focus,.btn:active.focus,.btn:active:focus,.btn:focus{outline:thin dotted;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}.btn.focus,.btn:focus,.btn:hover{color:#333;text-decoration:none}.btn.active,.btn:active{background-image:none;outline:0;-webkit-box-shadow:inset 0 3px 5px rgba(0,0,0,.125);box-shadow:inset 0 3px 5px rgba(0,0,0,.125)}.btn.disabled,.btn[disabled],fieldset[disabled] .btn{pointer-events:none;cursor:not-allowed;filter:alpha(opacity=65);-webkit-box-shadow:none;box-shadow:none;opacity:.65}#funnel_chart_map{padding-top:22px;color:#777c7c}.g-chart{width:100%}.g-chart-leftbar{float:left;border-right:1px solid #fff}.g-chart-leftbar-tick-out{position:relative}.g-chart-leftbar-tick{position:absolute;top:-10px;height:20px;line-height:20px;right:10px}.g-chart-bar-out,.g-chart-bottom-left,.g-chart-main{float:left;position:relative;height:100%}.g-chart-bar-in{cursor:pointer;position:absolute;bottom:0;width:50%;max-width:120px;left:50%;-webkit-transform:translate(-50%,0);-ms-transform:translate(-50%,0);transform:translate(-50%,0);background:#76abe9;border-radius:3px 3px 0 0;-webkit-transition:background .2s;transition:background .2s}.g-chart-bar-out:hover .g-chart-bar-in,.g-chart-bar-out:hover+.g-chart-bar-out .g-chart-bar-in{background:#609de6}.active-after .g-chart-bar-in,.active-before .g-chart-bar-in{background:#4a90e2;border:2px solid #2275d7}.g-chart-bar-title{position:absolute;left:0;margin-bottom:4px;width:100%;height:15px;line-height:15px;text-align:center;font-weight:400;font-size:16px}.g-chart-bar-out:hover .g-chart-bar-title,.g-chart-bar-out:hover+.g-chart-bar-out .g-chart-bar-title{color:#4c535a}.active-after .g-chart-bar-title,.active-before .g-chart-bar-title{font-weight:700}.g-chart-convert-out{position:absolute;right:0;top:50%;z-index:2}.g-chart-convert-title{position:relative;left:18px;font-size:12px;text-align:center;padding-bottom:2px}.active-before .g-chart-convert-title{color:#000;font-weight:700}.g-chart-convert-in{cursor:pointer;left:18px;position:relative;text-align:center;width:50px;height:40px;color:#fff;padding:10px 0;border-radius:3px}.g-chart-convert-in:before{content:"";display:block;width:28px;height:28px;position:absolute;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg);border-radius:3px;right:-13px;top:6px;z-index:-1}.g-chart-main-seperate-line{color:#ccc;position:absolute;left:0;width:100%;padding:0;margin:0;z-index:-1}.convert-color-1{background:#e35c47;-webkit-transition:background .2s;transition:background .2s}.convert-color-1:hover,.convert-color-1:hover:before{background:#d63921}.active-before .convert-color-1,.active-before .convert-color-1:before{background:#d63921}.convert-color-1:before{background:#e35c47;-webkit-transition:background .2s;transition:background .2s}.convert-color-2{background:#e36a48;-webkit-transition:background .2s;transition:background .2s}.convert-color-2:hover,.convert-color-2:hover:before{background:#d74921}.active-before .convert-color-2,.active-before .convert-color-2:before{background:#d74921}.convert-color-2:before{background:#e36a48;-webkit-transition:background .2s;transition:background .2s}.convert-color-3{background:#e3924a;-webkit-transition:background .2s;transition:background .2s}.convert-color-3:hover,.convert-color-3:hover:before{background:#d97821}.active-before .convert-color-3,.active-before .convert-color-3:before{background:#d97821}.convert-color-3:before{background:#e3924a;-webkit-transition:background .2s;transition:background .2s}.convert-color-4{background:#e4b14c;-webkit-transition:background .2s;transition:background .2s}.convert-color-4:hover,.convert-color-4:hover:before{background:#dc9d21}.active-before .convert-color-4,.active-before .convert-color-4:before{background:#dc9d21}.convert-color-4:before{background:#e4b14c;-webkit-transition:background .2s;transition:background .2s}.convert-color-5{background:#e4c14d;-webkit-transition:background .2s;transition:background .2s}.convert-color-5:hover,.convert-color-5:hover:before{background:#ddb121}.active-before .convert-color-5,.active-before .convert-color-5:before{background:#ddb121}.convert-color-5:before{background:#e4c14d;-webkit-transition:background .2s;transition:background .2s}.convert-color-6{background:#d7cb53;-webkit-transition:background .2s;transition:background .2s}.convert-color-6:hover,.convert-color-6:hover:before{background:#c8ba2f}.active-before .convert-color-6,.active-before .convert-color-6:before{background:#c8ba2f}.convert-color-6:before{background:#d7cb53;-webkit-transition:background .2s;transition:background .2s}.convert-color-7{background:#c5c24c;-webkit-transition:background .2s;transition:background .2s}.convert-color-7:hover,.convert-color-7:hover:before{background:#a8a536}.active-before .convert-color-7,.active-before .convert-color-7:before{background:#a8a536}.convert-color-7:before{background:#c5c24c;-webkit-transition:background .2s;transition:background .2s}.convert-color-8{background:#77c34a;-webkit-transition:background .2s;transition:background .2s}.convert-color-8:hover,.convert-color-8:hover:before{background:#5fa436}.active-before .convert-color-8,.active-before .convert-color-8:before{background:#5fa436}.convert-color-8:before{background:#77c34a;-webkit-transition:background .2s;transition:background .2s}.convert-color-9{background:#a8c34b;-webkit-transition:background .2s;transition:background .2s}.convert-color-9:hover,.convert-color-9:hover:before{background:#8ca437}.active-before .convert-color-9,.active-before .convert-color-9:before{background:#8ca437}.convert-color-9:before{background:#a8c34b;-webkit-transition:background .2s;transition:background .2s}.convert-color-10{background:#48c362;-webkit-transition:background .2s;transition:background .2s}.convert-color-10:hover,.convert-color-10:hover:before{background:#35a34c}.active-before .convert-color-10,.active-before .convert-color-10:before{background:#35a34c}.convert-color-10:before{background:#48c362;-webkit-transition:background .2s;transition:background .2s}.g-chart-bottom-main{float:left}.g-chart-bottombar{width:100%;height:70px;clear:both}.g-chart-bottom-sec-out{float:left;position:relative;text-align:center}.g-chart-bottom-name{display:inline-block}.g-chart-bottom-left .g-chart-bottom-name{height:30px;margin-top:24px}.g-chart-bottom-left.active-before .g-chart-bottom-name{background:#00b27a;color:#fff;border:0}.g-chart-bottom-main .g-chart-bottom-name{line-height:1.2;margin-top:20px;background:0;color:#4a90e2;border-radius:0;border:0;max-width:calc(100% - 50px);padding:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.g-chart-bottom-main .g-chart-bottom-name:active,.g-chart-bottom-main .g-chart-bottom-name:focus,.g-chart-bottom-main .g-chart-bottom-name:hover{color:#2275d7;-webkit-box-shadow:none;box-shadow:none;border:0;outline:0}.g-chart-bottom-main .active-after .g-chart-bottom-name,.g-chart-bottom-main .active-before .g-chart-bottom-name{border-bottom:2px solid #00b27a}.g-chart-arrow-out{position:absolute;right:0;top:0;z-index:50}.g-chart-arrow-in{cursor:pointer;left:25px;position:relative;text-align:center;width:50px;top:25px;height:35px;background:url(/gulpdemo/img/echarts/arrow_normal.svg?v=4cf01794d0) no-repeat;-webkit-transition:background .2s;transition:background .2s}.g-chart-arrow-in:hover{background:url(/gulpdemo/img/echarts/arrow_hover.svg?v=d4eaff2d9e) no-repeat}.active-before .g-chart-arrow-in{background:url(/gulpdemo/img/echarts/arrow_selected.svg?v=7776a46325) no-repeat}.retention-total{font-size:16px;font-weight:700}#sensors-future-modal .modal-content{border-radius:none}#sensors-future-modal .modal-header{border-bottom:0}.chart-map{margin:30px 0}</style></head><body><header class="header"><nav><ul class="navigation"><li><a href="/gulpdemo/index.html" target="_self" title="返回首页" class="home"></a></li><li><a href="/gulpdemo/html/mobile/taobao_adapter.html">移动端</a></li><li><a href="/gulpdemo/html/webDesign/vertical_align.html" target="_self">网页布局</a></li><li><a href="/gulpdemo/html/javascript/chinamap.html" target="_self">javascript & JQuery</a></li><li><a href="/gulpdemo/html/css3/transform.html" target="_self">CSS3</a></li><li><a href="/gulpdemo/html/h5/img2base64.html" target="_self">H5</a></li><li><a href="/gulpdemo/html/plugin/plugin_instruction.html" target="_self">插件说明</a></li><li><a href="/gulpdemo/html/echarts/freshness.html" target="_self">echarts</a></li></ul></nav></header><div class="container01"><div class="c-left"><input type="hidden" value="7" id="menuId"><div class="side-menu"><ul class="side-menu-list"><li><a href="/gulpdemo/html/echarts/freshness.html"><i class="icon-blank"></i>用户新鲜度</a></li><li><a href="/gulpdemo/html/echarts/funnel.html"><i class="icon-blank"></i>漏斗模型</a></li><li><a href="/gulpdemo/html/echarts/userTransition.html"><i class="icon-blank"></i>用户构成</a></li></ul></div></div><div class="c-right"><div class="chart-map clearfix" id="funnel_chart_map"></div></div></div><footer class="footer"><p>Author: wangyaru</p><p>Created time: 2016/02/15</p><p>&copy;forever</p></footer><script type="text/javascript" src="/gulpdemo/js/jquery-1.12.1.js?v=da6deec5d1"></script><script type="text/javascript" src="/gulpdemo/js/jquery-migrate-1.1.1.js?v=d62a5c2a27"></script><script type="text/javascript" src="/gulpdemo/plugin/bootstrap-3.3.5/js/bootstrap.js?v=5a9f44d675"></script><script type="text/javascript" src="/gulpdemo/plugin/jquery-jbox/2.3/jquery.jBox-2.3.src.js?v=568416d5b1"></script><script type="text/javascript" src="/gulpdemo/js/main.js?v=6f399efa9e"></script><script type="text/javascript">function drawChart(){function t(){if(!$(this).hasClass("active-before")){var t=$(this).data("bar-pos");i.removeClass("active-before"),i.removeClass("active-after"),t===c&&(t-=1),a.eq(t).addClass("active-before"),a.eq(t+1).addClass("active-after"),r.eq(t).addClass("active-before"),r.eq(t+1).addClass("active-after")}}$("#funnel_chart_map").empty(),$("#funnel_chart_map").gChartBar({series:[303,267,231,221,190],category:["第一步：<br/>点击开始","第二步：<br/>点击注册","第三步：<br/>点确定或跳过密码","第四步：名片宣传页<br/>下一步点击","第五步：<br/>创建名片页"],convert:["88.12%","86.52%","95.67%","88.88%",0],leftBarWidth:50});var e=$("#funnel_chart_map .g-chart");e.find(".g-chart-bottom-left").addClass("active-before").find(".g-chart-bottom-name").html("总览");var a=e.find(".g-chart-bar-out").each(function(t){$(this).data("bar-pos",t)}),r=e.find(".g-chart-bottom-sec-out").each(function(t){$(this).data("bar-pos",t)}),i=e.find(".g-chart-bottom-left").add(a).add(r),c=r.size()-1,s=e.find(".g-chart-convert-in");s.each(function(t,e){var a=Number($(e).text().slice(0,-1))/10,r=0;r=0===a?1:Math.ceil(a),$(e).addClass("convert-color-"+r)}),e.on("selectstart",function(t){return t.preventDefault(),t.stopPropagation(),!1}),e.on("click",".g-chart-bottom-left",function(){$(this).hasClass("active-before")||(i.removeClass("active-before"),i.removeClass("active-after"),$(this).addClass("active-before"),$("#fu_table_out").children().hide(),$("#fu_state_table_out").show())}).on("click",".g-chart-bar-in",function(){t.call($(this).closest(".g-chart-bar-out"))}).on("click",".g-chart-bottom-main .g-chart-bottom-name",function(){t.call($(this).closest(".g-chart-bottom-sec-out"))}).on("click",".g-chart-arrow-in",function(){t.call($(this).closest(".g-chart-bottom-sec-out"))}).on("click",".g-chart-convert-in",function(){t.call($(this).closest(".g-chart-bar-out"))})}var tools={formatNumber:function(t,e){if(null===t)return"--";if(!$.isNumeric(t))return t+"";if(t+="","0"===t)return t;if(e!==!0)return(t+"").replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");if(t.indexOf(".")!==-1)return t;t=parseInt(t,10);var a="";return t<0&&(a="负",t=Math.abs(t)),t%1e8===0?a+t/1e8+"亿":t%1e4===0?a+t/1e4+"万":a+t}};!function(){function t(t,e){function a(t){var e=t[0],a=t[t.length-1];return e<a?[e,a]:[a,e]}function r(t,e){e=e||10;var r=a(t),i=r[1]-r[0],c=Math.pow(10,Math.floor(Math.log(i/e)/Math.LN10)),s=e/i*c;return s<=.15?c*=10:s<=.35?c*=5:s<=.75&&(c*=2),r[0]=Math.ceil(r[0]/c)*c,r[1]=Math.floor(r[1]/c)*c+.5*c,r[2]=c,r}function i(t){var e=null,a=String(t).match(/\.([^0]+)/);return a&&a[1]&&(a=a[1].length,t=t.toFixed(a)),String(parseInt(t)).length>6?(e=(t/1e4).toFixed(1).toString(),"0"!==e.split(".")[1]?e+"w":e.split(".")[0]+"w"):String(parseInt(t)).length>4?(e=(t/1e3).toFixed(1).toString(),"0"!==e.split(".")[1]?e+"k":e.split(".")[0]+"k"):t}function c(){l="";for(var t=n.leftBarSeperate;t>0;t--)l+='<div class="g-chart-leftbar-tick-out" style="height:'+n.leftBarSeperateHeight+'px;"><div class="g-chart-leftbar-tick">'+i(t*n.scale[2])+"</div></div>";return l}function s(){var t=100/n.series.length+"%",e=null,a="",r=0;for(r=0;r<=n.leftBarSeperate;r++)a+='<hr class="g-chart-main-seperate-line" style="top: '+r*n.leftBarSeperateHeight+'px"/>';for(r=0;r<n.series.length;r++)e=n.getScaleSeries(n.series[r]),a+='<div class="g-chart-bar-out" style="width:'+t+'">',r<n.series.length-1&&(a+='<div class="g-chart-convert-out"><div class="g-chart-convert-title">流失率</div><div class="g-chart-convert-in">'+n.convert[r]+"</div></div>"),a+='<div class="g-chart-bar-title" style="bottom:'+e+'px">'+tools.formatNumber(n.series[r])+'<span style="font-size:13px;">人</span></div>',a+='<div class="g-chart-bar-in" style="height:'+e+'px"></div></div>';return a}function o(){var t=100/n.series.length+"%",e="";e+='<div class="g-chart-bottom-left" style="width:'+n.leftBarWidth+'px"><div class="g-chart-leftbar-tick">0</div><button class="g-chart-bottom-name btn"></button></div>',e+='<div class="g-chart-bottom-main" style="width:calc(100% - '+n.leftBarWidth+'px)">';for(var a=0;a<n.category.length;a++)e+='<div class="g-chart-bottom-sec-out" style="width:'+t+'">',a<n.category.length-1&&(e+='<div class="g-chart-arrow-out"><div class="g-chart-arrow-in"></div></div>'),e+='<button class="g-chart-bottom-name btn">'+n.category[a]+"</button></div>";return e+="</div>"}var n={};n=$.extend({height:350,leftBarWidth:50},e),n.getScaleSeries=function(t){return t*n.height/(n.leftBarSeperate*n.scale[2])},function(){var t=n.series.slice(0).sort(function(t,e){return e-t})[0];n.scale=r([0,t],5),n.leftBarSeperate=Math.ceil(n.scale[1]/n.scale[2]),n.leftBarSeperateHeight=n.height/n.leftBarSeperate}();var l="";l+='<div class="g-chart g-chartbar clearfix" style="height:'+n.height+'px">',l+='<div class="g-chart-leftbar" style="width:'+n.leftBarWidth+'px">',l+=c(),l+="</div>",l+='<div class="g-chart-main" style="width:calc(100% - '+n.leftBarWidth+'px)">',l+=s(),l+="</div>",l+='<div class="g-chart-bottombar">',l+=o(),l+="</div>",l+="</div>",t.html(l)}$.fn.gChartBar=function(e){return t(this,e),this}}(),drawChart()</script></body></html>