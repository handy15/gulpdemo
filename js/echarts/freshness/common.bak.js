function onSlide(t,e){appVM.startDay!=e[0]&&appVM.endDay!=e[1]||(appVM.startDay=d3.min(e),appVM.endDay=d3.max(e),debounceZooming())}function formatDateRange(t){return t.map(function(t,e){return[t.getFullYear(),("0"+(t.getMonth()+1)).slice(-2),("0"+t.getDate()).slice(-2)].join("-")})}function debounce(t,e,o){var a;return function(){var n=this,s=arguments,i=function(){a=null,o||t.apply(n,s)},l=o&&!a;clearTimeout(a),a=setTimeout(i,e),l&&t.apply(n,s)}}var now=new Date,format=d3.time.format("%Y-%m-%d"),options={chart:"#viz",width:document.getElementsByClassName("mod-body")[0].offsetWidth,height:600,mouseOver:function(){tipVM.states.isShow=!0},mouseOut:function(){tipVM.states.isShow=!1},loaded:function(){document.getElementsByClassName("wait-load")[0].style.display="none"},failed:function(){document.getElementById("error-info").style.display="",document.getElementById("viz").style.display="none"}},showingMethodsTabVM=new Vue({el:"#showing-methods-tab",data:{tabs:[{name:"绝对值",value:"zero"},{name:"百分比",value:"expand"}],activeIndex:0},computed:{offset:function(){return this.tabs[this.activeIndex].value}},methods:{onClickTab:function(t,e){this.activeIndex!==e&&(this.activeIndex=e),streamChart.draw({offset:t.value}),appVM.states.isZoomIn&&appVM.$emit("zoomIn")}}}),paletteVM=new Vue({el:"#color-container",data:{colors:[1,2,3],selectColorCate:"color-category1",states:{isShow:!1}},methods:{togglePalette:function(t){t.stopPropagation(),this.states.isShow=!this.states.isShow},onClickColor:function(t,e,o){o.stopPropagation(),this.selectColorCate="color-category"+t,document.getElementById("chart-slider").className="d3-slider d3-slider-horizontal slider-color-category"+t,appVM.$emit("changeColor",e),streamChart.draw({offset:showingMethodsTabVM.offset}),appVM.states.isZoomIn&&appVM.$emit("zoomIn")}}}),tipVM=new Vue({el:"#tip",data:{date:null,select:null,data:null,sumTitle:null,total:null,tipType:"当日",top:0,left:0,states:{isShow:!1}}});document.addEventListener("click",function(){paletteVM.states.isShow=!1});var debounceZooming=debounce(function(){appVM.$emit("zoomIn")},200);