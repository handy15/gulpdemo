jQuery.extend({createUploadIframe:function(e,t){var r="jUploadFrame"+e;if(window.ActiveXObject&&"true"==jQuery.FuckInternetExplorer()){var a=document.createElement('<iframe id="'+r+'" name="'+r+'" />');"boolean"==typeof t?a.src="javascript:false":"string"==typeof t&&(a.src=t)}else{var a=document.createElement("iframe");a.id=r,a.name=r}return a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px",document.body.appendChild(a),a},createUploadForm:function(e,t){var r="jUploadForm"+e,a="jUploadFile"+e,n=$('<form  action="" method="POST" name="'+r+'" id="'+r+'" enctype="multipart/form-data"></form>'),o=$("#"+t),u=$(o).clone();return $(o).attr("id",a),$(o).before(u),$(o).appendTo(n),$(n).css("position","absolute"),$(n).css("top","-1200px"),$(n).css("left","-1200px"),$(n).appendTo("body"),n},addOtherRequestsToForm:function(e,t){var r=$('<input type="hidden" name="" value="">');for(var a in t){name=a,value=t[a];var n=r.clone();n.attr({name:name,value:value}),$(n).appendTo(e)}return e},ajaxFileUpload:function(e){e=jQuery.extend({},jQuery.ajaxSettings,e);var t=(new Date).getTime(),r=jQuery.createUploadForm(t,e.fileElementId);e.data&&(r=jQuery.addOtherRequestsToForm(r,e.data));var a=(jQuery.createUploadIframe(t,e.secureuri),"jUploadFrame"+t),n="jUploadForm"+t;e.global&&!jQuery.active++&&jQuery.event.trigger("ajaxStart");var o=!1,u={};e.global&&jQuery.event.trigger("ajaxSend",[u,e]);var c=function(t){var n=document.getElementById(a);try{n.contentWindow?(u.responseText=n.contentWindow.document.body?n.contentWindow.document.body.innerHTML:null,u.responseXML=n.contentWindow.document.XMLDocument?n.contentWindow.document.XMLDocument:n.contentWindow.document):n.contentDocument&&(u.responseText=n.contentDocument.document.body?n.contentDocument.document.body.innerHTML:null,u.responseXML=n.contentDocument.document.XMLDocument?n.contentDocument.document.XMLDocument:n.contentDocument.document)}catch(c){jQuery.handleError(e,u,null,c)}if(u||"timeout"==t){o=!0;var d;try{if(d="timeout"!=t?"success":"error","error"!=d){var l=jQuery.uploadHttpData(u,e.dataType);e.success&&e.success(l,d),e.global&&jQuery.event.trigger("ajaxSuccess",[u,e])}else jQuery.handleError(e,u,d)}catch(c){d="error",jQuery.handleError(e,u,d,c)}e.global&&jQuery.event.trigger("ajaxComplete",[u,e]),e.global&&!--jQuery.active&&jQuery.event.trigger("ajaxStop"),e.complete&&e.complete(u,d),jQuery(n).unbind(),setTimeout(function(){try{$(n).remove(),$(r).remove()}catch(t){jQuery.handleError(e,u,null,t)}},100),u=null}};e.timeout>0&&setTimeout(function(){o||c("timeout")},e.timeout);try{var r=$("#"+n);$(r).attr("action",e.url),$(r).attr("method","POST"),$(r).attr("target",a),r.encoding?r.encoding="multipart/form-data":r.enctype="multipart/form-data",$(r).submit()}catch(d){jQuery.handleError(e,u,null,d)}return window.attachEvent?document.getElementById(a).attachEvent("onload",c):document.getElementById(a).addEventListener("load",c,!1),{abort:function(){}}},uploadHttpData:function(r,type){var data=!type;if(data="xml"==type||data?r.responseXML:r.responseText,"script"==type&&jQuery.globalEval(data),"json"==type){var data=r.responseText,rx=new RegExp("<pre.*?>((.|\n)*?)</pre>","i"),am=rx.exec(data),data=am?am[1]:"";data=data.replace(/\n/g,"<br/>"),eval("data = "+data)}return"html"==type&&jQuery("<div>").html(data).evalScripts(),data},handleError:function(e,t,r,a){e.error&&e.error.call(e.context||e,t,r,a),e.global&&(e.context?jQuery(e.context):jQuery.event).trigger("ajaxError",[t,e,a])},FuckInternetExplorer:function(){var e=navigator.appVersion,t=e.split(";");if(t.length>1){var r=parseInt(t[1].replace(/[ ]/g,"").replace(/MSIE/g,""));if(r<9)return"true"}return"false"}});